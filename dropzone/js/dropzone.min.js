var Dropzone;Dropzone=function(){function a(a,b){var c;null==b&&(b=[]),c={script:null,ajaxQueue:!1,autoUpload:!1,classDragOver:"is-dragover",onUploadingFiles:function(a,b){},onSelectFiles:function(a,b){},onSuccessFile:function(a,b,c){},onComplete:function(a,b){},onFileError:function(a,b){},onFileFail:function(a,b){}},this.options=$.extend(c,b),this.files=[],$.each($(a),function(a){return function(b,c){var d,e;return d=$(c),e=d.find("input[type=file]"),e.css({width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute","z-index":"-1"}),d.data("pos",b),e.on("change",function(b){return a.files[d.data("pos")]=b.target.files}),a.initDrag(d)}}(this))}return a.prototype.initDrag=function(a){var b;if(this.isAdvancedUpload())return b=!1,a.on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(b){return function(){a.addClass(b.options.classDragOver)}}(this)).on("dragleave dragend drop",function(b){return function(){a.removeClass(b.options.classDragOver)}}(this)).on("drop",function(c){return function(d){return b=d.originalEvent.dataTransfer.files,c.options.onSelectFiles(b,a),c.options.autoUpload?c.submit(a,b):c.files[a.data("pos")]=b}}(this))},a.prototype.startUpload=function(a){var b;if(b=this.files[a.data("pos")])return this.submit(a,b)},a.prototype.submit=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(a.hasClass("is-uploading"))return!1;for(a.addClass("is-uploading"),k=b.length,l=1,e=a.find("input[type=file]").attr("name"),this.options.onUploadingFiles(l,k),j=[],g=f=0,h=b.length;f<h;g=++f)d=b[g],i=new FormData,i.append(e+"[]",d),i.append("position",g),c=this.options.ajaxQueue?$.ajaxQueue:$.ajax,j.push(c({url:this.options.script,type:"POST",data:i,processData:!1,contentType:!1,cache:!1,complete:function(c){return function(){return l++,l>=k+1?(c.options.onComplete(b,a),c.removeFiles(a),a.removeClass("is-uploading")):c.options.onUploadingFiles(l,k)}}(this),success:function(b){return function(c){b.options.onSuccessFile(d,c,a)}}(this),fail:function(b){return function(c){b.options.onFileFail(c,a)}}(this),error:function(b){return function(c){b.options.onFileError(c,a)}}(this)}));return j},a.prototype.removeFiles=function(a){return this.files[a.data("pos")]=null},a.prototype.isAdvancedUpload=function(){var a;return a=document.createElement("div"),("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window},a.prototype.isFormData=function(){return"FormData"in window},a.prototype.isFileReader=function(){return"FileReader"in window},a.prototype.isDraggable=function(){var a;return a=document.createElement("div"),"draggable"in a||"ondragstart"in a&&"ondrop"in a},a}();